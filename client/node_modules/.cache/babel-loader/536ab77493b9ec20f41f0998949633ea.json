{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Projects\\\\playground\\\\playground-medium-clone\\\\client\\\\src\\\\components\\\\Editor.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport MediumEditor from 'medium-editor';\nimport axios from 'axios';\nimport EditorHeader from './EditorHeader';\nimport './../../node_modules/medium-editor/dist/css/medium-editor.min.css';\n\nvar Editor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Editor, _Component);\n\n  function Editor() {\n    var _this;\n\n    _classCallCheck(this, Editor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Editor).call(this));\n    _this.state = {\n      title: '',\n      text: '',\n      description: '',\n      imgSrc: null,\n      loading: false\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.previewImg = _this.previewImg.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.publishStory = _this.publishStory.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Editor, [{\n    key: \"publishStory\",\n    value: function publishStory() {\n      var _this2 = this;\n\n      this.setState({\n        loading: true\n      });\n      console.log(this.state);\n      console.log('publishing...');\n\n      var _url = process.env.NODE_ENV === 'production' ? \"/api/\" : \"http://localhost:5000/api/\";\n\n      var formdata = new FormData();\n      formdata.append('text', this.state.text);\n      formdata.append('image', this.state.imgSrc);\n      formdata.append('title', document.getElementById('editor-title').value);\n      formdata.append('author_id', this.props.user._id);\n      formdata.append('description', this.state.description);\n      formdata.append('claps', 0);\n      axios.post(\"\".concat(_url, \"article\"),\n      /*{\r\n      text: this.state.text,\r\n      title: document.getElementById('editor-title').value,\r\n      claps: 0,\r\n      description: this.state.description,\r\n      feature_img: this.state.imgSrc,\r\n      author_id: this.props.user._id\r\n      }*/\n      formdata).then(function (res) {\n        _this2.setState({\n          loading: false\n        });\n\n        console.log(res.data);\n      }).catch(function (err) {\n        console.log(err);\n\n        _this2.setState({\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      console.log('clicked');\n      this.refs.fileUploader.click();\n    }\n  }, {\n    key: \"previewImg\",\n    value: function previewImg() {\n      console.log('preview');\n      var file = this.refs.fileUploader.files[0];\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        document.getElementById('image_preview').src = e.target.result;\n        this.setState({\n          imgSrc: file\n          /*e.target.result*/\n\n        });\n      }.bind(this);\n\n      reader.readAsDataURL(file);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var editor = new MediumEditor(\n      /*dom, */\n      \".medium-editable\", {\n        autoLink: true,\n        delay: 1000,\n        targetBlank: true,\n        toolbar: {\n          buttons: ['bold', 'italic', 'quote', 'underline', 'anchor', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'strikethrough', 'subscript', 'superscript', 'pre', 'image', 'html', 'justifyCenter'],\n          diffLeft: 25,\n          diffTop: 10\n        },\n        anchor: {\n          placeholderText: 'Type a link',\n          customClassOption: 'btn',\n          customClassOptionText: 'Create Button'\n        },\n        paste: {\n          cleanPastedHTML: true,\n          cleanAttrs: ['style', 'dir'],\n          cleanTags: ['label', 'meta'],\n          unwrapTags: ['sub', 'sup']\n        },\n        anchorPreview: {\n          hideDelay: 300\n        },\n        placeholder: {\n          text: 'Tell your story...'\n          /*\r\n          placeholder: { text: \"Tell your Story ...\", hideOnClick: true },\r\n          toolbar: {\r\n            buttons: ['bold', 'italic']\r\n          } */\n\n        }\n      });\n      editor.subscribe('editableInput', function (ev, editable) {\n        if (typeof document !== 'undefined') _this3.setState({\n          title: document.getElementById('editor-title').value,\n          text: editor.getContent(0),\n          description: \"\".concat(editor.getContent(0).substring(0, 30).toString(), \"...\")\n        });\n        console.log(_this3.state);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(EditorHeader, {\n        publish: this.publishStory,\n        loading: this.state.loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container-fluid main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row animated fadeInUp\",\n        \"data-animation\": \"fadeInUp-fadeOutDown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"main-post\",\n        className: \"col-xs-10 col-md-8 col-md-offset-2 col-xs-offset-1 main-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"post-metadata\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: this.props.user.name,\n        className: \"avatar-image\",\n        src: this.props.user.provider_pic,\n        height: \"40\",\n        width: \"40\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"post-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        \"data-react-className\": \"PopoverLink\",\n        \"data-react-props\": \"{\\\"user_id\\\":608,\\\"url\\\":\\\"/users/netk\\\",\\\"children\\\":\\\"netk\\\"}\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"popover-link\",\n        \"data-reactroot\": \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.props.user.name))), React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.props.user.email))), React.createElement(\"form\", {\n        className: \"editor-form main-editor\",\n        autocomplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.state.imgSrc != null ? 'file-upload-previewer' : 'file-upload-previewer hidden',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"\",\n        alt: \"\",\n        id: \"image_preview\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"existing-img-previewer\",\n        id: \"existing-img-previewer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"picture_upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-camera\",\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        col: \"1\",\n        className: \"editor-title\",\n        id: \"editor-title\",\n        placeholder: \"Title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        id: \"medium-editable\",\n        className: \"medium-editable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"hidden\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        onChange: function onChange() {\n          return _this4.previewImg();\n        },\n        id: \"file\",\n        ref: \"fileUploader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Editor;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.authUser.user\n  };\n};\n\nexport default connect(mapStateToProps)(Editor);","map":{"version":3,"sources":["D:\\Projects\\playground\\playground-medium-clone\\client\\src\\components\\Editor.js"],"names":["React","Component","connect","MediumEditor","axios","EditorHeader","Editor","state","title","text","description","imgSrc","loading","handleClick","bind","previewImg","publishStory","setState","console","log","_url","process","env","NODE_ENV","formdata","FormData","append","document","getElementById","value","props","user","_id","post","then","res","data","catch","err","refs","fileUploader","click","file","files","reader","FileReader","onload","e","src","target","result","readAsDataURL","editor","autoLink","delay","targetBlank","toolbar","buttons","diffLeft","diffTop","anchor","placeholderText","customClassOption","customClassOptionText","paste","cleanPastedHTML","cleanAttrs","cleanTags","unwrapTags","anchorPreview","hideDelay","placeholder","subscribe","ev","editable","getContent","substring","toString","name","provider_pic","email","mapStateToProps","authUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport MediumEditor from 'medium-editor'\r\nimport axios from 'axios'\r\nimport EditorHeader from './EditorHeader'\r\nimport './../../node_modules/medium-editor/dist/css/medium-editor.min.css'\r\n\r\nclass Editor extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = {\r\n      title: '',\r\n      text: '',\r\n      description: '',\r\n      imgSrc: null,\r\n      loading: false\r\n    }\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.previewImg = this.previewImg.bind(this)\r\n    this.publishStory = this.publishStory.bind(this)\r\n  }\r\n\r\n  publishStory () {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    console.log(this.state)  \r\n    console.log('publishing...')\r\n    const _url = process.env.NODE_ENV === 'production' ? \"/api/\" : \"http://localhost:5000/api/\"\r\n    const formdata = new FormData()\r\n    formdata.append('text', this.state.text)\r\n    formdata.append('image', this.state.imgSrc)\r\n    formdata.append('title', document.getElementById('editor-title').value)\r\n    formdata.append('author_id', this.props.user._id)\r\n    formdata.append('description', this.state.description)\r\n    formdata.append('claps', 0)\r\n    axios.post(`${_url}article`, /*{\r\n      text: this.state.text,\r\n      title: document.getElementById('editor-title').value,\r\n      claps: 0,\r\n      description: this.state.description,\r\n      feature_img: this.state.imgSrc,\r\n      author_id: this.props.user._id\r\n    }*/formdata).then((res) => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      console.log(res.data)\r\n    }).catch((err)=>{console.log(err); this.setState({loading: false})})\r\n  } \r\n\r\n  handleClick () {\r\n    console.log('clicked')\r\n    this.refs.fileUploader.click()\r\n  }\r\n\r\n  previewImg () {\r\n    console.log('preview')\r\n    const file = this.refs.fileUploader.files[0]\r\n    var reader = new FileReader()\r\n    reader.onload = function (e) {\r\n      document.getElementById('image_preview').src = e.target.result\r\n      this.setState({\r\n        imgSrc: file/*e.target.result*/\r\n      })\r\n    }.bind(this)\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  componentDidMount () {\r\n    const editor = new MediumEditor(/*dom, */\".medium-editable\",{ \r\n        autoLink: true,\r\n        delay: 1000,\r\n        targetBlank: true,\r\n        toolbar: {\r\n            buttons: [\r\n              'bold', \r\n              'italic', \r\n              'quote', \r\n              'underline', \r\n              'anchor', \r\n              'h1',\r\n              'h2', \r\n              'h3',\r\n              'h4',\r\n              'h5',\r\n              'h6',\r\n              'strikethrough',\r\n              'subscript',\r\n              'superscript',\r\n              'pre',\r\n              'image',\r\n              'html',\r\n              'justifyCenter'\r\n            ],\r\n            diffLeft: 25,\r\n            diffTop: 10,\r\n        },\r\n        anchor: {\r\n            placeholderText: 'Type a link',\r\n            customClassOption: 'btn',\r\n            customClassOptionText: 'Create Button'\r\n        },\r\n        paste: {\r\n            cleanPastedHTML: true,\r\n            cleanAttrs: ['style', 'dir'],\r\n            cleanTags: ['label', 'meta'],\r\n            unwrapTags: ['sub', 'sup']\r\n        },\r\n        anchorPreview: {\r\n            hideDelay: 300\r\n        },\r\n        placeholder: {\r\n            text: 'Tell your story...'\r\n        }\r\n      /*\r\n      placeholder: { text: \"Tell your Story ...\", hideOnClick: true },\r\n      toolbar: {\r\n        buttons: ['bold', 'italic']\r\n      } */\r\n    })    \r\n    editor.subscribe('editableInput', (ev, editable) => {\r\n      if(typeof document !== 'undefined')\r\n        this.setState({\r\n          title: document.getElementById('editor-title').value,\r\n          text: editor.getContent(0),\r\n          description: `${editor.getContent(0).substring(0,30).toString()}...`\r\n        })\r\n        console.log(this.state)\r\n    })\r\n  }\r\n    render() {\r\n        return ( \r\n<div>\r\n  <EditorHeader publish={this.publishStory} loading={this.state.loading} />\r\n    <div className=\"container-fluid main-container\">\r\n      <div className=\"row animated fadeInUp\" data-animation=\"fadeInUp-fadeOutDown\">\r\n          <div id=\"main-post\" className=\"col-xs-10 col-md-8 col-md-offset-2 col-xs-offset-1 main-content\">\r\n              <div className=\"post-metadata\">\r\n                  <img alt={this.props.user.name} className=\"avatar-image\" src={this.props.user.provider_pic} height=\"40\" width=\"40\" />\r\n                  <div className=\"post-info\">\r\n                      <div data-react-className=\"PopoverLink\" data-react-props=\"{&quot;user_id&quot;:608,&quot;url&quot;:&quot;/users/netk&quot;,&quot;children&quot;:&quot;netk&quot;}\"><span className=\"popover-link\" data-reactroot=\"\"><a href=\"\">{this.props.user.name}</a></span></div>\r\n                      <small>{this.props.user.email}</small>\r\n                  </div>\r\n              </div>\r\n\r\n              <form className=\"editor-form main-editor\" autocomplete=\"off\" >\r\n\r\n                <div className={this.state.imgSrc != null ? 'file-upload-previewer' : 'file-upload-previewer hidden'}>\r\n                  <img src=\"\" alt=\"\" id=\"image_preview\"/>\r\n                </div>\r\n\r\n                  <div className=\"existing-img-previewer\" id=\"existing-img-previewer\">\r\n                  </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <span className=\"picture_upload\">\r\n                    <i className=\"fa fa-camera\" onClick={this.handleClick}></i>\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <textarea col=\"1\" className=\"editor-title\" id=\"editor-title\" placeholder=\"Title\"></textarea>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <textarea id=\"medium-editable\" className=\"medium-editable\" ></textarea>\r\n                </div>\r\n\r\n              <div class=\"hidden\">\r\n                <input type=\"file\" onChange={ ()=>this.previewImg()} id=\"file\" ref=\"fileUploader\"/>\r\n              </div>\r\n\r\n              </form>\r\n\r\n          </div>\r\n      </div> \r\n    </div>\r\n</div>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n      user: state.authUser.user\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(Editor);"]},"metadata":{},"sourceType":"module"}